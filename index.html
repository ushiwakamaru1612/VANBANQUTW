<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test PDF.js Viewer</title>

  <!-- pdf.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc =
      "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.worker.min.js";
  </script>

  <style>
    body { font-family: sans-serif; background: #eee; padding: 20px; }
    .hidden { display: none; }
    .pdf-viewer {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      margin: 20px auto;
      max-width: 90%;
    }
    .pdf-viewer canvas {
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      border-radius: 8px;
    }
  </style>
</head>
<body>

  <!-- N√∫t m·ªü PDF -->
  <button onclick="openViewer('viewer8', 'vbdh/3. QUY CH·∫æ L√ÄM VI·ªÜC C·ª¶A ƒêH.pdf')" 
          style="padding:10px 20px; background:#2563eb; color:#fff; border:none; border-radius:6px;">
    üìÑ M·ªü QUY CH·∫æ ƒê·∫†I H·ªòI
  </button>

  <!-- Viewer -->
  <div id="viewer8" class="hidden w-full h-screen flex flex-col bg-blue-900 fixed inset-0 z-50 overflow-y-auto">
    <div class="flex justify-between items-center bg-blue-800 text-white px-4 py-2 sticky top-0 z-10">
      <button onclick="goBack('viewer8')" style="background:#1d4ed8; padding:5px 10px; border-radius:5px;">‚Üê Quay l·∫°i</button>
      <h2 class="font-bold text-lg">QUY CH·∫æ L√ÄM VI·ªÜC ƒê·∫†I H·ªòI</h2>
      <a href="vbdh/3. QUY CH·∫æ L√ÄM VI·ªÜC C·ª¶A ƒêH.pdf" download
         style="background:#16a34a; padding:5px 10px; border-radius:5px; color:white; text-decoration:none;">‚¨á T·∫£i xu·ªëng</a>
    </div>
    <div id="viewer8-pdf" class="pdf-viewer"></div>
  </div>

  <!-- Script -->
  <script>
    function openViewer(viewerId, pdfUrl) {
      // ·∫®n t·∫•t c·∫£ viewer
      document.querySelectorAll('[id^="viewer"]').forEach(v => v.classList.add("hidden"));

      // Hi·ªán viewer ƒë∆∞·ª£c ch·ªçn
      const viewer = document.getElementById(viewerId);
      viewer.classList.remove("hidden");

      // L·∫•y container pdf
      const container = viewer.querySelector(".pdf-viewer");
      container.innerHTML = ""; // clear l·∫ßn render tr∆∞·ªõc

      // Load PDF
      pdfjsLib.getDocument(pdfUrl).promise.then(pdf => {
        for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
          pdf.getPage(pageNum).then(page => {
            const scale = 1.2;
            const viewport = page.getViewport({ scale });

            const canvas = document.createElement("canvas");
            const context = canvas.getContext("2d");
            canvas.height = viewport.height;
            canvas.width = viewport.width;

            page.render({ canvasContext: context, viewport: viewport });
            container.appendChild(canvas);
          });
        }
      });
    }

    function goBack(viewerId) {
      document.getElementById(viewerId).classList.add("hidden");
    }
  </script>

</body>
</html>
